     1 00000000                                 ; CopyRight (c) 2022-present, The Vexah Team. 
     2 00000000                                 ; All rights reserved.
     3 00000000                                 ; Author: The Vexah Team, DrAlfred
     4 00000000                                 ; Version: 0.2.1
     5 00000000                                 ; Date: 2022-07-29
     6 00000000                                 ; License: MIT
     7 00000000                                 
     8                                                  ORG		0x7c00			; 这个程序会被读入哪里
     9 00007C00                                 
    10 00007C00                                 ; 以下是标准FAT32格式软盘的初始化代码
    11 00007C00                                 
    12 00007C00 EB 4E                                   JMP		entry
    13 00007C02 90                                      DB		0x90
    14 00007C03 56 65 78 61 68 2D 4F 53                 DB		"Vexah-OS"		; 可以自由写引导扇区的名称（8字节）
    15 00007C0B 0200                                    DW		512			; 1个扇区的大小（必须为512）
    16 00007C0D 01                                      DB		1			; 群集大小（必须为一个扇区）
    17 00007C0E 0001                                    DW		1			; FAT从哪里开始（一般从第一个扇区开始）
    18 00007C10 02                                      DB		2			; FAT个数（必须为2）
    19 00007C11 00E0                                    DW		224			; 根目录区域的大小（通常为224个条目）
    20 00007C13 0B40                                    DW		2880			; 此驱动器的大小（必须为2880个扇区）
    21 00007C15 F0                                      DB		0xf0			; 介质类型（必须为0xf0）
    22 00007C16 0009                                    DW		9			; FAT区域长度（必须为9个扇区）
    23 00007C18 0012                                    DW		18			; 一个磁道有多少个扇区（必须是18）
    24 00007C1A 0002                                    DW		2			; 头数（必须为2）
    25 00007C1C 00000000                                DD		0			; 因为没有使用分区，所以这里一定是0
    26 00007C20 00000B40                                DD		2880			; 再写一次这个驱动器的大小
    27 00007C24 00 00 29                                DB		0,0,0x29		; 虽然不太清楚，但是这个价格就好了
    28 00007C27 FFFFFFFF                                DD		0xffffffff		; 可能是卷序列号
    29 00007C2B 56 65 78 61 68 2D 4F 53 20 20           DB		"Vexah-OS   "	        ; 磁盘名称（11字节）
       00007C35 20 
    30 00007C36 46 41 54 33 32 20 20 20                 DB		"FAT32   "		; 格式名称（8字节）
    31 00007C3E 00 00 00 00 00 00 00 00 00 00           RESB	        18			; 先打18个字节
       00007C48 00 00 00 00 00 00 00 00 
    32 00007C50                                 
    33 00007C50                                 ; 程序主体
    34 00007C50                                 
    35 00007C50                                 entry:
    36 00007C50 B8 0000                                 MOV		AX,0			; 寄存器初始化
    37 00007C53 8E D0                                   MOV		SS,AX
    38 00007C55 BC 7C00                                 MOV		SP,0x7c00
    39 00007C58 8E D8                                   MOV		DS,AX
    40 00007C5A                                 
    41 00007C5A                                 ; 读磁盘
    42 00007C5A                                 
    43 00007C5A B8 0820                                 MOV		AX,0x0820
    44 00007C5D 8E C0                                   MOV		ES,AX
    45 00007C5F B5 00                                   MOV		CH,0			; 柱面0
    46 00007C61 B6 00                                   MOV		DH,0			; 磁头0
    47 00007C63 B1 02                                   MOV		CL,2			; 扇区2
    48 00007C65                                 
    49 00007C65 B4 02                                   MOV		AH,0x02			; AH=0x02:磁盘读取
    50 00007C67 B0 01                                   MOV		AL,1			; 一个扇区
    51 00007C69 BB 0000                                 MOV		BX,0
    52 00007C6C B2 00                                   MOV		DL,0x00			; A驱动器
    53 00007C6E CD 13                                   INT		0x13			; 磁盘BIOS调用
    54 00007C70 72 03                                   JC		error
    55 00007C72                                 
    56 00007C72                                 ; 虽然读完了，但总之没什么要做的，所以睡觉
    57 00007C72                                 
    58 00007C72                                 fin:
    59 00007C72 F4                                      HLT					; 停止处理器直到出现问题
    60 00007C73 EB FD                                   JMP		fin			; 无限循环
    61 00007C75                                 
    62 00007C75                                 error:
    63 00007C75 BE 7C8A                                 MOV		SI,msg
    64 00007C78                                         
    65 00007C78                                 putloop:
    66 00007C78 8A 04                                   MOV		AL,[SI]
    67 00007C7A 83 C6 01                                ADD		SI,1			; SI加1
    68 00007C7D 3C 00                                   CMP		AL,0
    69 00007C7F 74 F1                                   JE		fin
    70 00007C81 B4 0E                                   MOV		AH,0x0e			; 单字显示功能
    71 00007C83 BB 000F                                 MOV		BX,15			; 彩色编码
    72 00007C86 CD 10                                   INT		0x10			; 视频BIOS调用
    73 00007C88 EB EE                                   JMP		putloop
    74 00007C8A                                 
    75 00007C8A                                 msg:
    76 00007C8A 0A 0A                                   DB		0x0a, 0x0a		; 两个换行符
    77 00007C8C 45 72 72 6F 72 3A 20 44 69 73           DB		"Error: Disk read failed! Please check the disk."
       00007C96 6B 20 72 65 61 64 20 66 61 69 
       00007CA0 6C 65 64 21 20 50 6C 65 61 73 
       00007CAA 65 20 63 68 65 63 6B 20 74 68 
       00007CB4 65 20 64 69 73 6B 2E 
    78 00007CBB 0A                                      DB		0x0a			; 换行
    79 00007CBC 00                                      DB		0
    80 00007CBD                                 
    81 00007CBD 00 00 00 00 00 00 00 00 00 00           RESB	        0x7dfe-$		; 用0x00填充到0x7dfe的命令
       00007CC7 00 00 00 00 00 00 00 00 00 00 
       00007CD1 00 00 00 00 00 00 00 00 00 00 
       00007CDB 00 00 00 00 00 00 00 00 00 00 
       00007CE5 00 00 00 00 00 00 00 00 00 00 
       00007CEF 00 00 00 00 00 00 00 00 00 00 
       00007CF9 00 00 00 00 00 00 00 00 00 00 
       00007D03 00 00 00 00 00 00 00 00 00 00 
       00007D0D 00 00 00 00 00 00 00 00 00 00 
       00007D17 00 00 00 00 00 00 00 00 00 00 
       00007D21 00 00 00 00 00 00 00 00 00 00 
       00007D2B 00 00 00 00 00 00 00 00 00 00 
       00007D35 00 00 00 00 00 00 00 00 00 00 
       00007D3F 00 00 00 00 00 00 00 00 00 00 
       00007D49 00 00 00 00 00 00 00 00 00 00 
       00007D53 00 00 00 00 00 00 00 00 00 00 
       00007D5D 00 00 00 00 00 00 00 00 00 00 
       00007D67 00 00 00 00 00 00 00 00 00 00 
       00007D71 00 00 00 00 00 00 00 00 00 00 
       00007D7B 00 00 00 00 00 00 00 00 00 00 
       00007D85 00 00 00 00 00 00 00 00 00 00 
       00007D8F 00 00 00 00 00 00 00 00 00 00 
       00007D99 00 00 00 00 00 00 00 00 00 00 
       00007DA3 00 00 00 00 00 00 00 00 00 00 
       00007DAD 00 00 00 00 00 00 00 00 00 00 
       00007DB7 00 00 00 00 00 00 00 00 00 00 
       00007DC1 00 00 00 00 00 00 00 00 00 00 
       00007DCB 00 00 00 00 00 00 00 00 00 00 
       00007DD5 00 00 00 00 00 00 00 00 00 00 
       00007DDF 00 00 00 00 00 00 00 00 00 00 
       00007DE9 00 00 00 00 00 00 00 00 00 00 
       00007DF3 00 00 00 00 00 00 00 00 00 00 
       00007DFD 00 
    82 00007DFE                                 
    83 00007DFE 55 AA                                   DB		0x55, 0xaa
